{"ast":null,"code":"import _objectSpread from\"D:/UI-Workspace/google-map-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/UI-Workspace/google-map-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as Yup from'yup';import AuthService from'../../services/auth.service';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangePassword=function ChangePassword(){var _errors$oldpassword,_errors$newpassword;var currentUser=AuthService.getCurrentUser();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),successful=_useState4[0],setSuccessful=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var validationSchema=Yup.object().shape({oldpassword:Yup.string().required('Old password is required'),newpassword:Yup.string().required('New Password is required').min(4,'Password must be at least 4 characters').max(40,'Password must not exceed 40 characters').notOneOf([Yup.ref('oldpassword'),null],'New password must be different')});var _useForm=useForm({resolver:yupResolver(validationSchema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var handleChangePassword=function handleChangePassword(data){setMessage(\"\");setSuccessful(false);setLoading(true);AuthService.changepassword(data.oldpassword,data.newpassword,currentUser.email).then(function(response){setMessage(\"You have successfully changed your password.\");setSuccessful(true);setLoading(false);console.log(JSON.stringify(data,null,2));console.log(response.data);},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setMessage(resMessage);setSuccessful(false);setLoading(false);});};return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 mb-2 bg-dark text-white\",children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handleChangePassword),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"oldpassword\",children:\"Old password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"oldpassword\"},register('oldpassword')),{},{className:\"form-control \".concat(errors.oldpassword?'is-invalid':'')})),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:(_errors$oldpassword=errors.oldpassword)===null||_errors$oldpassword===void 0?void 0:_errors$oldpassword.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newpassword\",children:\"New password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"newpassword\"},register('newpassword')),{},{className:\"form-control \".concat(errors.newpassword?'is-invalid':'')})),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:(_errors$newpassword=errors.newpassword)===null||_errors$newpassword===void 0?void 0:_errors$newpassword.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Update Password\"})]})})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:successful?\"alert alert-success\":\"alert alert-danger\",role:\"alert\",children:message})})]})]})});};export default ChangePassword;","map":{"version":3,"names":["React","useState","useForm","yupResolver","Yup","AuthService","ChangePassword","currentUser","getCurrentUser","loading","setLoading","successful","setSuccessful","message","setMessage","validationSchema","object","shape","oldpassword","string","required","newpassword","min","max","notOneOf","ref","resolver","register","handleSubmit","errors","formState","handleChangePassword","data","changepassword","email","then","response","console","log","JSON","stringify","error","resMessage","toString"],"sources":["D:/UI-Workspace/google-map-react-app/src/components/pages/ChangePassword.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\nimport AuthService from '../../services/auth.service';\r\n\r\nconst ChangePassword = () => {\r\n\r\n  const currentUser = AuthService.getCurrentUser();\r\n  const [loading, setLoading] = useState(false);\r\n  const [successful, setSuccessful] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n    const validationSchema = Yup.object().shape({\r\n        oldpassword: Yup.string()\r\n        .required('Old password is required'),\r\n        newpassword: Yup.string()\r\n        .required('New Password is required')\r\n        .min(4, 'Password must be at least 4 characters')\r\n        .max(40, 'Password must not exceed 40 characters')\r\n        .notOneOf([Yup.ref('oldpassword'), null], 'New password must be different'),\r\n    });\r\n\r\n    const {\r\n      register,\r\n      handleSubmit,\r\n      formState: { errors }\r\n    } = useForm({\r\n      resolver: yupResolver(validationSchema)\r\n    });\r\n\r\n    const handleChangePassword = data =>{\r\n        setMessage(\"\");\r\n        setSuccessful(false);\r\n        setLoading(true);\r\n        AuthService.changepassword(data.oldpassword, data.newpassword, currentUser.email).then(response => {\r\n          setMessage(\"You have successfully changed your password.\");\r\n          setSuccessful(true);\r\n          setLoading(false);\r\n          console.log(JSON.stringify(data, null, 2));\r\n          console.log(response.data);  \r\n      },\r\n      (error) => {\r\n        const resMessage =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString();\r\n\r\n        setMessage(resMessage);\r\n        setSuccessful(false);\r\n        setLoading(false);\r\n      }\r\n        );\r\n    }\r\n  return (\r\n    <div className=\"col-md-12\">\r\n      <div className=\"card card-container\">\r\n      <div className=\"card-header p-3 mb-2 bg-dark text-white\">\r\n            Change Password\r\n      </div>\r\n        <form onSubmit={handleSubmit(handleChangePassword)}>     \r\n          <div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"oldpassword\">Old password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"oldpassword\"\r\n              {...register('oldpassword')}\r\n              className={`form-control ${errors.oldpassword ? 'is-invalid' : ''}`}\r\n            />\r\n             <div className=\"invalid-feedback\">{errors.oldpassword?.message}</div>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"newpassword\">New password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"newpassword\"\r\n              {...register('newpassword')}\r\n              className={`form-control ${errors.newpassword ? 'is-invalid' : ''}`}\r\n            />\r\n             <div className=\"invalid-feedback\">{errors.newpassword?.message}</div>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <button className=\"btn btn-primary btn-block\" disabled={loading}>\r\n              {loading && (\r\n                <span className=\"spinner-border spinner-border-sm\"></span>\r\n              )}\r\n              <span>Update Password</span>\r\n            </button>\r\n          </div>\r\n          </div>\r\n          {message && (\r\n            <div className=\"form-group\">\r\n              <div\r\n                className={ successful ? \"alert alert-success\" : \"alert alert-danger\" }\r\n                role=\"alert\"\r\n              >\r\n                {message}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default ChangePassword"],"mappings":"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"},"metadata":{},"sourceType":"module"}