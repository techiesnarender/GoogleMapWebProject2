{"ast":null,"code":"import _objectSpread from\"D:/UI-Workspace/google-map-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/UI-Workspace/google-map-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as Yup from'yup';import AuthService from\"../../services/auth.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _errors$email,_errors$password;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var navigate=useNavigate();var validationSchema=Yup.object().shape({email:Yup.string().required('Email is required').email('Email is invalid'),password:Yup.string().required('Password is required').min(4,'Password must be at least 4 characters').max(40,'Password must not exceed 40 characters')});var _useForm=useForm({resolver:yupResolver(validationSchema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var onSubmit=function onSubmit(data){setMessage(\"\");setLoading(true);console.log(JSON.stringify(data,null,2));AuthService.login(data.email,data.password).then(function(){navigate(\"/profile\");window.location.reload();},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();console.log(resMessage);setLoading(false);setMessage(resMessage);});};return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",alt:\"profile-img\",className:\"profile-img-card\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"email\"},register('email')),{},{className:\"form-control \".concat(errors.email?'is-invalid':'')})),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"password\"},register('password')),{},{className:\"form-control \".concat(errors.password?'is-invalid':'')})),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Login\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:message})})]}),/*#__PURE__*/_jsx(Link,{to:\"/forgetpassword\",className:\"nav-link text-center\",children:\"Forget Password?\"})]})});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","useForm","yupResolver","Yup","AuthService","Login","loading","setLoading","message","setMessage","navigate","validationSchema","object","shape","email","string","required","password","min","max","resolver","register","handleSubmit","errors","formState","onSubmit","data","console","log","JSON","stringify","login","then","window","location","reload","error","resMessage","response","toString"],"sources":["D:/UI-Workspace/google-map-react-app/src/components/pages/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\n\r\nimport AuthService from \"../../services/auth.service\";\r\n\r\nconst Login = () => {\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  let navigate = useNavigate();\r\n\r\n    const validationSchema = Yup.object().shape({\r\n        email: Yup.string()\r\n          .required('Email is required')\r\n          .email('Email is invalid'),\r\n        password: Yup.string()\r\n          .required('Password is required')\r\n          .min(4, 'Password must be at least 4 characters')\r\n          .max(40, 'Password must not exceed 40 characters'),\r\n      });\r\n\r\n      const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors }\r\n      } = useForm({\r\n        resolver: yupResolver(validationSchema)\r\n      });\r\n\r\n\r\n      const onSubmit = data => {\r\n        setMessage(\"\");\r\n        setLoading(true);\r\n        console.log(JSON.stringify(data, null, 2));\r\n      AuthService.login(data.email, data.password).then(\r\n        () => {\r\n          navigate(\"/profile\");\r\n          window.location.reload();\r\n        },\r\n        (error) => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n            console.log(resMessage);\r\n          setLoading(false);\r\n          setMessage( resMessage);\r\n        }\r\n      );\r\n      };\r\n  return (\r\n    <div className=\"col-md-12\">\r\n      <div className=\"card card-container\">\r\n        <img\r\n          src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n          alt=\"profile-img\"\r\n          className=\"profile-img-card\"\r\n        />\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\">Email Address</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"email\"\r\n              {...register('email')}\r\n              className={`form-control ${errors.email ? 'is-invalid' : ''}`}\r\n            />\r\n            <div className=\"invalid-feedback\">{errors.email?.message}</div>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input\r\n              type=\"password\"            \r\n              name=\"password\"\r\n              {...register('password')}\r\n              className={`form-control ${errors.password ? 'is-invalid' : ''}`}\r\n            />\r\n             <div className=\"invalid-feedback\">{errors.password?.message}</div>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <button className=\"btn btn-primary btn-block\" disabled={loading}>\r\n              {loading && (\r\n                <span className=\"spinner-border spinner-border-sm\"></span>\r\n              )}\r\n              <span>Login</span>\r\n            </button>\r\n          </div>\r\n          {message && (\r\n            <div className=\"form-group\">\r\n              <div className=\"alert alert-danger\" role=\"alert\">\r\n                {message}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </form>\r\n        <Link to={\"/forgetpassword\"} className=\"nav-link text-center\">\r\n        Forget Password?\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Login;"],"mappings":"mPAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAO,GAAKC,IAAG,KAAM,KAAK,CAE1B,MAAOC,YAAW,KAAM,6BAA6B,CAAC,wFAEtD,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,oCAElB,cAA8BP,QAAQ,CAAC,KAAK,CAAC,wCAAtCQ,OAAO,eAAEC,UAAU,eAC1B,eAA8BT,QAAQ,CAAC,EAAE,CAAC,yCAAnCU,OAAO,eAAEC,UAAU,eAC1B,GAAIC,SAAQ,CAAGV,WAAW,EAAE,CAE1B,GAAMW,iBAAgB,CAAGR,GAAG,CAACS,MAAM,EAAE,CAACC,KAAK,CAAC,CACxCC,KAAK,CAAEX,GAAG,CAACY,MAAM,EAAE,CAChBC,QAAQ,CAAC,mBAAmB,CAAC,CAC7BF,KAAK,CAAC,kBAAkB,CAAC,CAC5BG,QAAQ,CAAEd,GAAG,CAACY,MAAM,EAAE,CACnBC,QAAQ,CAAC,sBAAsB,CAAC,CAChCE,GAAG,CAAC,CAAC,CAAE,wCAAwC,CAAC,CAChDC,GAAG,CAAC,EAAE,CAAE,wCAAwC,CACrD,CAAC,CAAC,CAEF,aAIIlB,OAAO,CAAC,CACVmB,QAAQ,CAAElB,WAAW,CAACS,gBAAgB,CACxC,CAAC,CAAC,CALAU,QAAQ,UAARA,QAAQ,CACRC,YAAY,UAAZA,YAAY,CACCC,MAAM,UAAnBC,SAAS,CAAID,MAAM,CAMrB,GAAME,SAAQ,CAAG,QAAXA,SAAQ,CAAGC,IAAI,CAAI,CACvBjB,UAAU,CAAC,EAAE,CAAC,CACdF,UAAU,CAAC,IAAI,CAAC,CAChBoB,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC5CtB,WAAW,CAAC2B,KAAK,CAACL,IAAI,CAACZ,KAAK,CAAEY,IAAI,CAACT,QAAQ,CAAC,CAACe,IAAI,CAC/C,UAAM,CACJtB,QAAQ,CAAC,UAAU,CAAC,CACpBuB,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAC1B,CAAC,CACD,SAACC,KAAK,CAAK,CACT,GAAMC,WAAU,CACbD,KAAK,CAACE,QAAQ,EACbF,KAAK,CAACE,QAAQ,CAACZ,IAAI,EACnBU,KAAK,CAACE,QAAQ,CAACZ,IAAI,CAAClB,OAAO,EAC7B4B,KAAK,CAAC5B,OAAO,EACb4B,KAAK,CAACG,QAAQ,EAAE,CAChBZ,OAAO,CAACC,GAAG,CAACS,UAAU,CAAC,CACzB9B,UAAU,CAAC,KAAK,CAAC,CACjBE,UAAU,CAAE4B,UAAU,CAAC,CACzB,CAAC,CACF,CACD,CAAC,CACL,mBACE,YAAK,SAAS,CAAC,WAAW,uBACxB,aAAK,SAAS,CAAC,qBAAqB,wBAClC,YACE,GAAG,CAAC,6CAA6C,CACjD,GAAG,CAAC,aAAa,CACjB,SAAS,CAAC,kBAAkB,EAC5B,cACF,cAAM,QAAQ,CAAEf,YAAY,CAACG,QAAQ,CAAE,wBACrC,aAAK,SAAS,CAAC,YAAY,wBACzB,cAAO,OAAO,CAAC,OAAO,2BAAsB,cAC5C,0CACE,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,OAAO,EACRJ,QAAQ,CAAC,OAAO,CAAC,MACrB,SAAS,wBAAkBE,MAAM,CAACT,KAAK,CAAG,YAAY,CAAG,EAAE,CAAG,GAC9D,cACF,YAAK,SAAS,CAAC,kBAAkB,yBAAES,MAAM,CAACT,KAAK,wCAAZ,cAAcN,OAAO,EAAO,GAC3D,cACN,aAAK,SAAS,CAAC,YAAY,wBACzB,cAAO,OAAO,CAAC,UAAU,sBAAiB,cAC1C,0CACE,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,EACXa,QAAQ,CAAC,UAAU,CAAC,MACxB,SAAS,wBAAkBE,MAAM,CAACN,QAAQ,CAAG,YAAY,CAAG,EAAE,CAAG,GACjE,cACD,YAAK,SAAS,CAAC,kBAAkB,4BAAEM,MAAM,CAACN,QAAQ,2CAAf,iBAAiBT,OAAO,EAAO,GAC/D,cACN,YAAK,SAAS,CAAC,YAAY,uBACzB,gBAAQ,SAAS,CAAC,2BAA2B,CAAC,QAAQ,CAAEF,OAAQ,WAC7DA,OAAO,eACN,aAAM,SAAS,CAAC,kCAAkC,EACnD,cACD,+BAAkB,GACX,EACL,CACLE,OAAO,eACN,YAAK,SAAS,CAAC,YAAY,uBACzB,YAAK,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,UAC7CA,OAAO,EACJ,EAET,GACI,cACP,KAAC,IAAI,EAAC,EAAE,CAAE,iBAAkB,CAAC,SAAS,CAAC,sBAAsB,8BAEtD,GACH,EACF,CAEV,CAAC,CACD,cAAeH,MAAK"},"metadata":{},"sourceType":"module"}