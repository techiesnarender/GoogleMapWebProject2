{"ast":null,"code":"import _objectSpread from\"D:/UI-Workspace/google-map-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/UI-Workspace/google-map-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as Yup from'yup';import AuthService from'../../services/auth.service';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResetPassword=function ResetPassword(){var _errors$password,_errors$confirmPasswo;var authResult=new URLSearchParams(window.location.search);var token=authResult.get('token');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),successful=_useState6[0],setSuccessful=_useState6[1];var validationSchema=Yup.object().shape({password:Yup.string().required('Password is required').min(6,'Password must be at least 6 characters').max(40,'Password must not exceed 40 characters'),confirmPassword:Yup.string().required('Confirm Password is required').oneOf([Yup.ref('password'),null],'Confirm Password does not match')});var _useForm=useForm({resolver:yupResolver(validationSchema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var handleResetPassword=function handleResetPassword(data){setMessage(\"\");setSuccessful(false);setLoading(true);AuthService.resetPassword(data.token,data.password).then(function(response){setMessage(\"You have successfully changed your password.\");setSuccessful(true);setLoading(false);console.log(response.data);console.log(JSON.stringify(data,null,2));},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setLoading(false);setSuccessful(false);setMessage(resMessage);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{width:'40rem'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header alert-info text-center h3\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Reset Password\"})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit(handleResetPassword),children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('token')),{},{type:\"text\",className:\"form-control\",name:\"token\",id:\"token\",\"aria-describedby\":\"newpassword\",value:token,placeholder:\"Enter your new password\",style:{display:\"none\"}}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newpassword\",className:\"col-form-label font-weight-bold\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"password\",id:\"newpassword\",\"aria-describedby\":\"newpassword\",placeholder:\"Enter your new password\",autoFocus:true},register('password')),{},{className:\"form-control \".concat(errors.password?'is-invalid':'')})),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"col-form-label font-weight-bold\",children:\"Confirm Password: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"confirmPassword\",id:\"confirmPassword\",\"aria-describedby\":\"email\",placeholder:\"Enter your confirm password\"},register('confirmPassword')),{},{className:\"form-control \".concat(errors.confirmPassword?'is-invalid':'')})),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:(_errors$confirmPasswo=errors.confirmPassword)===null||_errors$confirmPasswo===void 0?void 0:_errors$confirmPasswo.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Change Password\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:successful?\"alert alert-success\":\"alert alert-danger\",role:\"alert\",children:message})})]})})]})});};export default ResetPassword;","map":{"version":3,"names":["React","useState","useForm","yupResolver","Yup","AuthService","ResetPassword","authResult","URLSearchParams","window","location","search","token","get","loading","setLoading","message","setMessage","successful","setSuccessful","validationSchema","object","shape","password","string","required","min","max","confirmPassword","oneOf","ref","resolver","register","handleSubmit","errors","formState","handleResetPassword","data","resetPassword","then","response","console","log","JSON","stringify","error","resMessage","toString","width","display"],"sources":["D:/UI-Workspace/google-map-react-app/src/components/pages/ResetPassword.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\nimport AuthService from '../../services/auth.service';\r\n\r\nconst ResetPassword = () =>  {\r\n  const authResult = new URLSearchParams(window.location.search); \r\n  const token = authResult.get('token')\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [successful, setSuccessful] = useState(false);\r\n\r\n  const validationSchema = Yup.object().shape({\r\n    password: Yup.string()\r\n      .required('Password is required')\r\n      .min(6, 'Password must be at least 6 characters')\r\n      .max(40, 'Password must not exceed 40 characters'),\r\n    confirmPassword: Yup.string()\r\n      .required('Confirm Password is required')\r\n      .oneOf([Yup.ref('password'), null], 'Confirm Password does not match')\r\n  });\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors }\r\n  } = useForm({\r\n    resolver: yupResolver(validationSchema)\r\n  });\r\n\r\n      const handleResetPassword = (data) =>{\r\n        setMessage(\"\");\r\n        setSuccessful(false);\r\n        setLoading(true);\r\n        AuthService.resetPassword(data.token, data.password).then(\r\n            (response) => {\r\n              setMessage(\"You have successfully changed your password.\");\r\n              setSuccessful(true);\r\n              setLoading(false);\r\n              console.log(response.data);\r\n              console.log(JSON.stringify(data, null, 2));\r\n            },\r\n            (error) => {\r\n              const resMessage =\r\n                (error.response &&\r\n                  error.response.data &&\r\n                  error.response.data.message) ||\r\n                error.message ||\r\n                error.toString();\r\n\r\n                setLoading(false);\r\n                setSuccessful(false);\r\n                setMessage(resMessage);\r\n            }\r\n          );\r\n    }\r\n  return (\r\n    <div className=\"container\" style={{width: '40rem'}}>\r\n\t\t\t<div className=\"card\">\r\n\t\t\t\t  <div className=\"card-header alert-info text-center h3\">\r\n\t\t\t\t  <h2>Reset Password</h2>\r\n\t\t\t\t  </div>\r\n                  <form onSubmit={handleSubmit(handleResetPassword)}>\r\n                    <div className=\"card-body\">\r\n                             <div className=\"form-group\">\r\n                                <input  {...register('token')} type=\"text\" className=\"form-control\" name='token' id=\"token\" aria-describedby=\"newpassword\" value={token} placeholder=\"Enter your new password\" style={{ display: \"none\" }}/>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"newpassword\" className='col-form-label font-weight-bold'>Password: </label>\r\n                                <input \r\n                                type=\"password\" \r\n                                name='password' \r\n                                id=\"newpassword\" \r\n                                aria-describedby=\"newpassword\" \r\n                                placeholder=\"Enter your new password\" \r\n                                autoFocus \r\n                                {...register('password')}\r\n                                className={`form-control ${errors.password ? 'is-invalid' : ''}`}\r\n                                />\r\n                                <div className=\"invalid-feedback\">{errors.password?.message}</div>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"confirmPassword\" className='col-form-label font-weight-bold'>Confirm Password: </label>\r\n                                <input \r\n                                type=\"password\" \r\n                                name=\"confirmPassword\" \r\n                                id=\"confirmPassword\"  \r\n                                aria-describedby=\"email\" \r\n                                placeholder=\"Enter your confirm password\"\r\n                                {...register('confirmPassword')}\r\n                                className={`form-control ${\r\n                                  errors.confirmPassword ? 'is-invalid' : ''\r\n                                }`}\r\n                                />\r\n                                <div className=\"invalid-feedback\">\r\n                                  {errors.confirmPassword?.message}\r\n                                </div>\r\n                            </div>                          \r\n                            <div className=\"form-group\">\r\n                            <button type='submit' className=\"btn btn-primary btn-block\" disabled={loading}>\r\n                                {loading && (\r\n                                    <span className=\"spinner-border spinner-border-sm\"></span>\r\n                                )}\r\n                                <span> Change Password</span>\r\n                            </button>\r\n                            </div>\r\n                            {message && (\r\n                                <div className=\"form-group\">\r\n                                <div\r\n                                    className={ successful ? \"alert alert-success\" : \"alert alert-danger\" }\r\n                                      role=\"alert\"\r\n                                    >\r\n                                    {message}\r\n                                </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </form>\r\n            </div>\r\n    </div>\r\n  )\r\n}\r\nexport default ResetPassword"],"mappings":"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"},"metadata":{},"sourceType":"module"}